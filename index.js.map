{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"49079569-ff8624e89e8813a2e30953c9b\"; \nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages (query, page = 1) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page,\n    per_page: 40,\n  };\n\n try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n } catch (error) {\n   throw error;\n }\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst galleryEl = document.querySelector(\".gallery\");\nlet lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\nexport function clearGallery() {\n  galleryEl.innerHTML = \"\";\n}\n\nexport function renderImages(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n      <li class=\"photo-card\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes: ${likes}</b></p>\n          <p class=\"info-item\"><b>Views: ${views}</b></p>\n          <p class=\"info-item\"><b>Comments: ${comments}</b></p>\n          <p class=\"info-item\"><b>Downloads: ${downloads}</b></p>\n        </div>\n      </li>\n      `;\n      }\n    )\n    .join(\"\");\n  galleryEl.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n}\n\n\n\nexport function showLoader() {\n  document.querySelector(\".loader\").hidden = false;\n}\n\nexport function hideLoader() {\n  document.querySelector(\".loader\").hidden = true;\n}\n\nexport function notifyError(message) {\n  iziToast.error({\n    title: \"Error\",\n    message,\n    position: \"topRight\",\n  });\n}\n\nexport function notifyInfo(message) {\n  iziToast.info({\n    title: \"Info\",\n    message,\n    position: \"topRight\",\n  });\n}\n\nexport function smoothScroll() {\n  // Отримуємо висоту першої карточки для розрахунку прокручування\n  const firstCard = document.querySelector(\".gallery .photo-card\");\n  if (firstCard) {\n    const { height: cardHeight } = firstCard.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: \"smooth\",\n    });\n  }\n}\n","import { fetchImages } from \"./js/pixabay-api.js\";\nimport {\n  renderImages,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  notifyError,\n  notifyInfo,\n  smoothScroll,\n} from \"./js/render-functions.js\";\n\nconst formEl = document.querySelector(\".search-form\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nlet currentQuery = \"\";\nlet currentPage = 1;\nlet totalHits = 0;\n\n\nloadMoreBtn.style.display = \"none\";\n\nformEl.addEventListener(\"submit\", async (event) => {\n  event.preventDefault();\n\n  currentQuery = event.currentTarget.query.value.trim();\n  if (currentQuery === \"\") {\n    notifyError(\"Please enter a search query.\");\n    return;\n  }\n\n  currentPage = 1;\n  totalHits = 0;\n  clearGallery();\n  loadMoreBtn.style.display = \"none\"; \n  showLoader();\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    hideLoader();\n\n    if (!data.hits || data.hits.length === 0) {\n      notifyError(\"Sorry, there are no images matching your search query.\");\n      return;\n    }\n\n    totalHits = data.totalHits;\n    renderImages(data.hits);\n\n    \n    if (currentPage * 40 < totalHits) {\n      loadMoreBtn.style.display = \"block\";\n    }\n  } catch (error) {\n    hideLoader();\n    notifyError(\"Something went wrong. Please try again later.\");\n    console.error(error);\n  }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  currentPage += 1;\n  showLoader();\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    hideLoader();\n\n    if (!data.hits || data.hits.length === 0) {\n      notifyInfo(\"We're sorry, but you've reached the end of search results.\");\n      loadMoreBtn.style.display = \"none\";\n      return;\n    }\n\n    renderImages(data.hits);\n    smoothScroll();\n\n   \n    if (currentPage * 40 >= totalHits) {\n      loadMoreBtn.style.display = \"none\";\n      notifyInfo(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    hideLoader();\n    notifyError(\"Something went wrong. Please try again later.\");\n    console.error(error);\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","params","axios","error","galleryEl","lightbox","SimpleLightbox","clearGallery","renderImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showLoader","hideLoader","notifyError","message","iziToast","notifyInfo","smoothScroll","firstCard","cardHeight","formEl","loadMoreBtn","currentQuery","currentPage","totalHits","event","data"],"mappings":"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"}